#include <VirtualWire.h>
int green = 7 ;
int red = 8 ;
const int node_id = 22;
const int rx_pin = 2;
const int tx_pin = 3;
int voice = 4;
int MQ9 = 5;
int pir = 6;

void setup() {
  Serial.begin(9600);
  pinMode(green, OUTPUT) ;
  pinMode(red, OUTPUT) ;
 pinMode(MQ9 , INPUT);
pinMode(voice , INPUT);
pinMode(pir , INPUT);
  
  vw_set_rx_pin(rx_pin);
  vw_set_ptt_inverted(true);
  vw_set_tx_pin(tx_pin);
  vw_setup(2000);
  vw_rx_start();
}
void loop() {
 int  d[3] ;
 d[0]= digitalRead(MQ9);

 d[1] = digitalRead(voice);
 d[2]= digitalRead(pir);
uint8_t Buffer_Size = 2;
 unsigned int in;
 uint8_t RxBuffer[Buffer_Size];
    if (vw_get_message(RxBuffer, &Buffer_Size)) // Non-blocking
    {
    in = RxBuffer[0] << 8 | RxBuffer[1];
    if (in == node_id ) {
   digitalWrite(green, HIGH);
   delay(500);
    digitalWrite(green, LOW);
  unsigned int Data;
  byte TxBuffer[2];
  for (int t=0 ; t<=2 ; t++ )
  {
  Data = d[t] ;
  TxBuffer[0] = Data >> 8;
  TxBuffer[1] = Data;
  digitalWrite(red, HIGH); 
  vw_send((byte *)TxBuffer, 2);
  vw_wait_tx(); 
  digitalWrite(red, LOW); 
    delay(200);
  }
    delay(500);
    
     }
    }
  }
