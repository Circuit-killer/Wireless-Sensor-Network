#include <SFE_BMP180.h>
#include <Wire.h>
#include <VirtualWire.h>
#include <dht.h>
SFE_BMP180 pressure;
dht DHT;
int green = 6 ;
int red = 5 ;
int DHT11_PIN=7;
const int node_id = 21;
const int rx_pin = 2;
const int tx_pin = 3;
const int light = A0;
void setup() {
  Serial.begin(9600);
  pinMode(green, OUTPUT) ;
  pinMode(red, OUTPUT) ;
  pinMode(light, INPUT);
  pinMode(13, OUTPUT) ;
  pressure.begin() ;
  vw_set_rx_pin(rx_pin);
  vw_set_ptt_inverted(true);
  vw_set_tx_pin(tx_pin);
  vw_setup(2000);
  vw_rx_start();
}
void loop() {
 int  d[4] ;
 d[0]= analogRead(light)/2;
 int chk = DHT.read11(DHT11_PIN);
 d[1] = DHT.humidity ;
 d[2]= DHT.temperature ;
 double P,T;
   pressure.startTemperature();
   pressure.getTemperature(T);
   pressure.startPressure(3);
   pressure.getPressure(P,T);
   d[3]=P;
uint8_t Buffer_Size = 2;
 unsigned int in;
 uint8_t RxBuffer[Buffer_Size];
    if (vw_get_message(RxBuffer, &Buffer_Size)) // Non-blocking
    {
    in = RxBuffer[0] << 8 | RxBuffer[1];
    if (in == node_id ) {
   digitalWrite(green, HIGH);
   delay(500);
    digitalWrite(green, LOW);
  unsigned int Data;
  byte TxBuffer[2];
  for (int t=0 ; t<=3 ; t++ )
  {
  Data = d[t] ;
  TxBuffer[0] = Data >> 8;
  TxBuffer[1] = Data;
  digitalWrite(red, HIGH); 
  vw_send((byte *)TxBuffer, 2);
  vw_wait_tx(); 
  digitalWrite(red, LOW); 
    delay(200);
  }
    delay(500);
    
     }
    }
  }
